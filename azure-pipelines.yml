name: '3.0$(rev:.r)'

trigger:
- main
- features/*

pr:
- main

pool:
  vmImage: 'windows-latest'

variables:
  - name: 'extensionId'
    value: 'jessehouwing-vsts-variable-tasks'
  - name: 'tfxVersion'
    value: 'builtin'
  - name: 'nodeVersion'
    value: '18.x'

stages:
- stage: 'Build'
  displayName: 'Build'
  jobs:
  - job: 
    displayName: 'Build'
    steps:
    - task: NodeTool@0
      inputs:
        versionSpec: $(nodeVersion)
      displayName: 'Install Node.js'

    - task: TfxInstaller@5
      displayName: 'Use Node CLI for Azure DevOps'

    - task: IsAzureDevOpsExtensionValid@5
      inputs:
        connectTo: 'AzureRM'
        connectedServiceNameAzureRM: 'azure-devops-marketplace'
        method: id
        publisherId: jessehouwing
        extensionId: jessehouwing-vsts-variable-tasks-dev
        extensionVersion: 3.0.1122


    - task: IsAzureDevOpsExtensionValid@4
      inputs:
        connectTo: 'AzureRM'
        connectedServiceNameAzureRM: 'azure-devops-marketplace'
        method: id
        publisherId: jessehouwing
        extensionId: jessehouwing-vsts-variable-tasks-dev
        extensionVersion: 3.0.1122
